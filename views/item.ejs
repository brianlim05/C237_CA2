<!-- views/item.ejs -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Sport Share - Item Info</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
  <%- include('share/navbar', { active: active }) %>

  <div class="container mt-5">
    <div class="text-center mb-4">
      <h2>Item Details</h2>
    </div>

    <% if (item) { %>
      <div class="card p-4 shadow-sm">
        <div class="row">
          <!-- Left: Image -->
          <div class="col-md-5 text-center">
            <img src="/images/<%= item.image %>" class="img-fluid" alt="<%= item.itemName %>" onerror="this.src='/images/placeholder.png'">
          </div>

          <!-- Right: Info -->
          <div class="col-md-7">
            <h4><%= item.itemName %></h4>
            <p><strong>Tag:</strong> <%= item.itemTag %></p>
            <p><strong>Quantity:</strong> <%= item.quantity %></p>
            <p><strong>Price:</strong> $<%= item.price.toFixed(2) %></p>

            <% if (item.availability) { %>
              <p><strong>Status:</strong>
                <span class="badge <%= item.availability === 'available' ? 'bg-success' : 'bg-secondary' %>">
                  <%= item.availability %>
                </span>
              </p>
            <% } %>

            <!-- Admin-only actions -->
            <% if (session.role === 'admin') { %>
              <form action="/deleteItem/<%= item.itemId %>" method="POST" onsubmit="return confirm('Are you sure you want to delete this item?');">
                <button type="submit" class="btn btn-danger me-2">Delete Item</button>
              </form>
              <a href="/inventory" class="btn btn-outline-secondary mt-3">Back to Inventory</a>
            <% } else { %>
              <a href="/borrowing" class="btn btn-outline-primary mt-3">Back to Items</a>
            <% } %>
          </div>
        </div>
      </div>
    <% } else { %>
      <div class="alert alert-danger text-center">No item found.</div>
    <% } %>
  </div>
</body>
</html>
